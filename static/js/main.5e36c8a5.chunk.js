(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(41),i=n.n(o),s=n(29),c=n(50),l=n(49),u=n(7),d=n(8),p=n(10),m=n(9),f=n(11),h=n(12),b=n(14),g=(n(56),n(57),n(58),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={name:""},n.onInputChange=function(e){n.setState({name:e.target.value})},n.onSubmit=function(e){e.preventDefault();var t=n.state.name;t?(n.props.onPointAdded(t),n.setState({name:""})):alert("Please, enter an address")},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.name;return r.a.createElement("form",{className:"point-add-form",onSubmit:this.onSubmit},r.a.createElement("input",{type:"text",id:"suggest",placeholder:"add new point",onChange:this.onInputChange,value:e}))}}]),t}(a.Component)),v=(n(59),n(60),n(13)),E=n(42),y=n(43);v.b.add(y.a);var O=function(e){var t=e.name,n=e.onDeleted;return r.a.createElement("li",{className:"points-list-item"},r.a.createElement("h4",null,t),r.a.createElement("button",{className:"btn btn-delete",onClick:n},r.a.createElement(E.a,{className:"icon",icon:"trash",size:"2x",color:"#940000"})))},j=function(e){var t=e.pointsList,n=e.onDeleted,a=t.map(function(e,t){var a=e.id,o=e.name;return r.a.createElement(b.b,{key:a,draggableId:String(a),index:t},function(e){return r.a.createElement("div",Object.assign({},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),r.a.createElement(O,{key:a,name:o,onDeleted:function(){return n(a)}}))})});return r.a.createElement("ul",{className:"point-list"},a)},C=(n(106),n(15)),k=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).map=null,n.state={center:[55.76,37.64],zoom:10,controls:[]},n.onBoundsChange=function(){var e=n.map.getCenter();n.props.mapCenter(e),n.setState({center:e})},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.pointsList,a=t.onPlacemarkDragend,o=t.onYmapsLoad,i=n.map(function(e){var t=e.id,n=e.name,o=e.coord;return r.a.createElement(C.Placemark,{key:t,geometry:o,properties:{balloonContent:n},options:{draggable:!0},onDragend:function(e){var n=e.get("target").geometry.getCoordinates();a(t,n)}})}),s=n.map(function(e){return e.coord});return r.a.createElement("div",{className:"map-block"},r.a.createElement(C.YMaps,{query:{load:"package.full",apikey:"2e897e10-0e8f-4974-841d-93edb806dc0d"}},r.a.createElement(C.Map,{state:this.state,instanceRef:function(t){return e.map=t},onLoad:function(e){return o(e)},width:"100%",height:"600px",onBoundsChange:this.onBoundsChange},i,r.a.createElement(C.Polyline,{geometry:s,options:{balloonCloseButton:!1,strokeColor:"#330033",strokeWidth:4,strokeOpacity:.5}}))))}}]),t}(a.Component),L=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).id=0,n.state={ymaps:null,mapCenter:[55.76,37.64],pointsList:[]},n.reorder=function(e,t,n){var a=Array.from(e),r=a.splice(t,1),o=Object(l.a)(r,1)[0];return a.splice(n,0,o),a},n.onDragEnd=n.onDragEnd.bind(Object(h.a)(Object(h.a)(n))),n.setYmaps=function(e){n.setState({ymaps:e})},n.setMapCenter=function(e){n.setState({mapCenter:e})},n.addPoint=function(e){n.setState(function(t){var a=t.pointsList,r=t.mapCenter;if(!a.some(function(t){return t.name===e}))return a.push({id:n.id++,name:e,coord:r}),{pointsList:a};alert("point with this name is already in list")})},n.deletePoint=function(e){n.setState(function(t){return{pointsList:t.pointsList.filter(function(t){return t.id!==e})}})},n.movePoint=function(e,t){n.setState(function(n){var a=n.pointsList,r=a.findIndex(function(t){return t.id===e}),o=a[r],i=Object(c.a)({},o,{coord:t});return{pointsList:[].concat(Object(s.a)(a.slice(0,r)),[i],Object(s.a)(a.slice(r+1)))}})},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"onDragEnd",value:function(e){if(e.destination){var t=this.reorder(this.state.pointsList,e.source.index,e.destination.index);this.setState({pointsList:t})}}},{key:"render",value:function(){var e=this,t=this.state.pointsList;return r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"point-form"},r.a.createElement(g,{onPointAdded:function(t){return e.addPoint(t)}}),r.a.createElement(b.a,{onDragEnd:this.onDragEnd},r.a.createElement(b.c,{droppableId:"droppable"},function(n){return r.a.createElement("div",Object.assign({ref:n.innerRef},n.droppableProps),r.a.createElement(j,{pointsList:t,onDeleted:e.deletePoint}),n.placeholder)}))),r.a.createElement(k,{pointsList:t,onYmapsLoad:this.setYmaps,mapCenter:this.setMapCenter,onPlacemarkDragend:this.movePoint}))}}]),t}(a.Component);i.a.render(r.a.createElement(L,null),document.getElementById("root"))},51:function(e,t,n){e.exports=n(107)},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){}},[[51,1,2]]]);
//# sourceMappingURL=main.5e36c8a5.chunk.js.map